<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="net.haebang.user.dao.SrvDao">


	<select id="selectServiceList" resultType="serviceVo" parameterType="serviceVo">
		select *
		from t_service
		where s_type=#{s_type} and s_place=#{s_place} and s_size between #{s_size} and #{s_size}+9
	</select>
	
	
	 <insert id="insertScdToNewMember" parameterType="java.util.HashMap">
		insert into t_member(m_name, m_address, m_phone, m_type, m_lon, m_lat) values(#{name}, #{address}, #{phone}, #{type}, #{lon}, #{lat})
	</insert>
	
	
	<select id="selectUserByInfo" parameterType="java.util.HashMap" resultType="memberVo">
		select m_no from t_member where m_phone=#{phone}
	</select>
	
	
	<insert id="insertScdByMNoOnetime" parameterType="java.util.HashMap">
		insert into t_m_order(mo_orderNo, m_no, mo_startTime, mo_endTime, s_no, mo_cnt, mo_freqType) 
		values(#{orderNo}, #{m_no}, #{startTime}, #{endTime}, #{service}, #{cnt}, #{unit})
	</insert>
	
	
	<insert id="insertScdByMNo" parameterType="java.util.HashMap">
		insert into t_m_order(mo_orderNo, m_no, mo_startTime, mo_endTime, s_no, mo_cnt, mo_total, mo_freqType, mo_freqCycle) values
		<foreach collection="scheduleList" item="item" separator=",">
		(#{orderNo}, #{m_no}, #{item.startTime}, #{item.endTime}, #{service}, #{item.cnt}, #{total}, #{unit}, #{cycle})
		</foreach>
	</insert>
	
	
	
	
	
	
</mapper>